{hook name="main.before-top-menu" location="before_top_menu" }

<nav id="main-navbar" role="navigation">
    <button type="button" id="main-navbar-collapse">
        <span></span>
    </button>

    {*
                {loop name="top-bar-search" type="auth" role="ADMIN" resource="admin.search"  access="VIEW"}
                <form class="navbar-form-xs col-xs-8 visible-xs" action="{url path='/admin/search'}">
                    <div class="input-group">
                        <input type="text" class="form-control" id="search_term" name="search_term" placeholder="{intl l='Search'}">
                        <span class="input-group-btn">
                            <button type="submit" class="btn btn-default"><span class="glyphicon glyphicon-search"></span></button>
                        </span>
                    </div>

                </form>
                {/loop}
    *}

    <ul class="list-unstyled">
        <li class="{if $admin_current_location == 'home'}active{/if}" id="home_menu">
            <a href="{url path='/admin/home'}">{intl l="Home"}</a>
        </li>

        {loop name="menu-auth-customer" type="auth" role="ADMIN" resource="admin.customer" access="VIEW"}
            {ifhook rel="main.top-menu-customer"}
                {hookblock name="main.top-menu-customer" fields="id,class,url,title"}
                    <li class="dropdown {if $admin_current_location == 'customer'}active{/if}" id="customers_menu">

                        <a href="{url path='/admin/customers'}" data-target="{url path='/admin/customers'}" class="dropdown-toggle" data-toggle="dropdown">{intl l="Customers"} <span class="caret"></span></a>

                        <ul class="dropdown-menu" role="menu">
                            {forhook rel="main.top-menu-customer"}
                                <li role="menuitem">
                                    <a {if $id}id="{$id}" {/if} class="{$class}" data-target="{$url}" href="{$url}">
                                        {$title}
                                    </a>
                                </li>
                            {/forhook}
                        </ul>
                    </li>
                {/hookblock}
            {/ifhook}
            {elsehook rel="main.top-menu-customer"}
                <li class="{if $admin_current_location == 'customer'}active{/if}" id="customers_menu">
                    <a href="{url path='/admin/customers'}" >{intl l="Customers"}</a>
                </li>
            {/elsehook}
        {/loop}

        {loop name="menu-auth-order" type="auth" role="ADMIN" resource="admin.order" access="VIEW"}
            <li class="dropdown {if $admin_current_location == 'order'}active{/if}" id="orders_menu">

                <a href="#" class="dropdown-toggle" data-toggle="dropdown">{intl l="Orders"} <span class="caret"></span></a>

                <ul class="dropdown-menu" role="menu">

                    <li role="menuitem">
                        <a class="clearfix" data-target="{url path='admin/orders'}" href="{url path='admin/orders'}">
                            <span class="pull-left">{intl l="All orders"}</span>
                            <span class="label label-default pull-right">{count type="order" customer="*" backend_context="1"}</span>
                        </a>
                    </li>

                    {loop name="order-status-list" type="order-status"}
                        {assign "orderStatusLabel" "order_$CODE"}
                            <li role="menuitem">
                                <a class="clearfix" data-target="{url path="admin/orders/$LABEL"}" href="{url path="admin/orders" status={$ID}}">
                                    <span class="pull-left">{$TITLE}</span>
                                    <span class="label label-{#$orderStatusLabel#|default:${"order_$CODE"}} pull-right">{count type="order" customer="*" backend_context="1" status={$ID}}</span>
                                </a>
                            </li>
                    {/loop}
                    {hookblock name="main.top-menu-order" fields="id,class,url,title"}
                        {forhook rel="main.top-menu-order"}
                            <li role="menuitem">
                                <a {if $id}id="{$id}" {/if} class="{$class}" data-target="{$url}" href="{$url}">
                                    {$title}
                                </a>
                            </li>
                        {/forhook}
                    {/hookblock}
                </ul>
            </li>
        {/loop}

        {loop name="menu-auth-catalog" type="auth" role="ADMIN" resource="admin.category" access="VIEW"}
            {ifhook rel="main.top-menu-catalog"}
                {hookblock name="main.top-menu-catalog" fields="id,class,url,title"}
                    <li class="dropdown {if $admin_current_location == 'catalog'}active{/if}" id="catalog_menu">

                        <a href="{url path='/admin/catalog'}" data-target="{url path='/admin/catalog'}" class="dropdown-toggle" data-toggle="dropdown">{intl l="Catalog"} <span class="caret"></span></a>

                        <ul class="dropdown-menu" role="menu">
                            {forhook rel="main.top-menu-catalog"}
                                <li role="menuitem">
                                    <a {if $id}id="{$id}" {/if} class="{$class}" data-target="{$url}" href="{$url}">
                                        {$title}
                                    </a>
                                </li>
                            {/forhook}
                        </ul>
                    </li>
                {/hookblock}
            {/ifhook}
            {elsehook rel="main.top-menu-catalog"}
                <li class="{if $admin_current_location == 'catalog'}active{/if}" id="catalog_menu">
                    <a href="{url path='/admin/catalog'}">{intl l="Catalog"}</a>
                </li>
            {/elsehook}
        {/loop}

        {loop name="menu-auth-content" type="auth" role="ADMIN" resource="admin.folder"  access="VIEW"}
            {ifhook rel="main.top-menu-content"}
                {hookblock name="main.top-menu-content" fields="id,class,url,title"}
                    <li class="dropdown {if $admin_current_location == 'content'}active{/if}" id="contents_menu">

                        <a href="{url path='/admin/folders'}" data-target="{url path='/admin/contents'}" class="dropdown-toggle" data-toggle="dropdown">{intl l="Folders"} <span class="caret"></span></a>

                        <ul class="dropdown-menu" role="menu">
                            {forhook rel="main.top-menu-content"}
                                <li role="menuitem">
                                    <a {if $id}id="{$id}" {/if} class="{$class}" data-target="{$url}" href="{$url}">
                                        {$title}
                                    </a>
                                </li>
                            {/forhook}
                        </ul>
                    </li>
                {/hookblock}
            {/ifhook}
            {elsehook rel="main.top-menu-content"}
                <li class="{if $admin_current_location == 'folder'}active{/if}" id="contents_menu">
                    <a href="{url path='/admin/folders'}" >{intl l="Folders"}</a>
                </li>
            {/elsehook}
        {/loop}

        {loop name="menu-auth-tools" type="auth" role="ADMIN" resource="admin.tools"  access="VIEW"}
            <li class="dropdown {if $admin_current_location == 'tools'}active{/if}" id="tools_menu">
                <a href="#" class="dropdown-toggle" data-toggle="dropdown">{intl l="Tools"} <span class="caret"></span></a>

                <ul class="dropdown-menu" role="menu">
                    {loop name="auth-coupon" type="auth" role="ADMIN" resource="admin.coupon"  access="VIEW"}
                        <li role="menuitem"><a href="{url path='/admin/coupon'}">{intl l="Coupons"}</a></li>
                    {/loop}

                    {loop name="auth-sales" type="auth" role="ADMIN" resource="admin.sales"  access="VIEW"}
                        <li role="menuitem"><a href="{url path='/admin/sales'}">{intl l="Sales management"}</a></li>
                    {/loop}

                    {loop name="auth-brand" type="auth" role="ADMIN" resource="admin.brand"  access="VIEW"}
                        <li role="menuitem"><a href="{url path='/admin/brand'}">{intl l="Brands"}</a></li>
                    {/loop}

                    {loop name="auth-export" type="auth" role="ADMIN" resource="admin.export"  access="VIEW"}
                        <li role="menuitem"><a href="{url path='/admin/export'}">{intl l="Export"}</a></li>
                    {/loop}

                    {loop name="auth-import" type="auth" role="ADMIN" resource="admin.import" access="VIEW"}
                        <li role="menuitem"><a href="{url path='/admin/import'}">{intl l="Import"}</a></li>
                    {/loop}

                    {hookblock name="main.top-menu-tools" fields="id,class,url,title"}
                        {forhook rel="main.top-menu-tools"}
                            <li role="menuitem">
                                <a {if $id}id="{$id}" {/if} class="{$class}" data-target="{$url}" href="{$url}">
                                    {$title}
                                </a>
                            </li>
                        {/forhook}
                    {/hookblock}

                </ul>
            </li>
        {/loop}

        {loop name="menu-auth-modules" type="auth" role="ADMIN" resource="admin.module"  access="VIEW"}
            {ifhook rel="main.top-menu-modules"}
                {hookblock name="main.top-menu-modules" fields="id,class,url,title"}
                    <li class="dropdown {if $admin_current_location == 'modules'}active{/if}" id="modules_menu">
                        <a href="{url path='/admin/modules'}" data-target="{url path='/admin/modules'}" class="dropdown-toggle" data-toggle="dropdown">{intl l="Modules"}<span class="caret"></span></a>

                        <ul class="dropdown-menu" role="menu">
                            {forhook rel="main.top-menu-modules"}
                                <li role="menuitem">
                                    <a {if $id}id="{$id}" {/if} class="{$class}" data-target="{$url}" href="{$url}">
                                        {$title}
                                    </a>
                                </li>
                            {/forhook}
                        </ul>
                    </li>
                {/hookblock}
            {/ifhook}
            {elsehook rel="main.top-menu-modules"}
                <li class="{if $admin_current_location == 'modules'}active{/if}" id="modules_menu">
                    <a href="{url path='/admin/modules'}" >{intl l="Modules"}</a>
                </li>
            {/elsehook}
        {/loop}

        {loop name="menu-auth-config" type="auth" role="ADMIN" resource="admin.configuration"  access="VIEW"}
            {ifhook rel="main.top-menu-configuration"}
                {hookblock name="main.top-menu-configuration" fields="id,class,url,title"}
                    <li class="dropdown {if $admin_current_location == 'configuration'}active{/if}" id="config_menu">
                        <a href="{url path='/admin/configuration'}" data-target="{url path='/admin/configuration'}" class="dropdown-toggle" data-toggle="dropdown">{intl l="Configuration"}<span class="caret"></span></a>

                        <ul class="dropdown-menu" role="menu">
                            {forhook rel="main.top-menu-configuration"}
                                <li role="menuitem">
                                    <a {if $id}id="{$id}" {/if} class="{$class}" data-target="{$url}" href="{$url}">
                                        {$title}
                                    </a>
                                </li>
                            {/forhook}
                        </ul>
                    </li>
                {/hookblock}
            {/ifhook}
            {elsehook rel="main.top-menu-configuration"}
                <li class="{if $admin_current_location == 'configuration'}active{/if}" id="config_menu">
                    <a href="{url path='/admin/configuration'}" >{intl l="Configuration"}</a>
                </li>
            {/elsehook}
        {/loop}


        {hook name="main.in-top-menu-items" location="in_top_menu_items" }

    </ul>

    {*
    {loop name="top-bar-search" type="auth" role="ADMIN" resource="admin.search"  access="VIEW"}
        <form class="navbar-form pull-right hidden-xs" action="{url path='/admin/search'}">
            <div class="form-group">
                <input type="text" class="form-control" id="search_term" name="search_term" placeholder="{intl l='Search'}">
            </div>
            <button type="submit" class="btn btn-default"><span class="glyphicon glyphicon-search"></span></button>
        </form>
    {/loop}
    *}


</nav>

{hook name="main.after-top-menu" location="after_top_menu" }