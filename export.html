{extends file="admin-layout.tpl"}

{block name="no-return-functions"}
    {$admin_current_location = 'tools'}
{/block}

{block name="page-title"}{intl l='Exports'}{/block}

{block name="check-resource"}admin.export{/block}
{block name="check-access"}view{/block}

{block name="main-content"}

    {form name="thelia.admin.export"}
    <form id="export-form" method="post" {form_enctype form=$form} class="clearfix">
        <div class="configuration">

            <div id="wrapper" class="container">

                <nav>
                    <ul class="breadcrumb">
                        <li><a href="{url path='admin/home'}">{intl l='Home'}</a></li>
                        <li><a href="{url path='admin/tools'}">{intl l='Tools'}</a></li>
                        <li>{intl l="Exports"}</li>
                    </ul>
                </nav>

                {module_include location='tools_top'}

                {loop name="export-category" type="export-category"}
                    {if $LOOP_COUNT % 3}
                    <div class="row">
                    {/if}

                        <div class="col-md-4">
                            <div class="menu-list-table general-block-decorator">
                                <div class="table-responsive">
                                    <table class="table table-striped table-condensed">
                                        <caption>
                                            <!-- add up and down arrows -->
                                            {$TITLE}
                                        </caption>
                                        <thead>
                                            <tr>
                                                <th class="col-md-1">
                                                    <a href="{url path="/admin/export"}?export_order=id{if $export_order == "id"}_reverse{/if}">
                                                        {intl l="ID"}
                                                    </a>
                                                </th>
                                                <th class="col-md-9">
                                                    <a href="{url path="/admin/export"}?export_order=alpha{if $export_order == "alpha"}_reverse{/if}">
                                                        {intl l="Name"}
                                                    </a>
                                                </th>
                                                <th class="col-md-2">
                                                    <a href="{url path="/admin/export"}?export_order=manual{if $export_order == "manual"}_reverse{/if}">
                                                        {intl l="Position"}
                                                    </a>
                                                </th>
                                            </tr>
                                        </thead>
                                        <tbody>
                                            {loop name="export-categ-list" type="export" order=$export_order category=$ID}
                                                <tr>
                                                    <td>
                                                        {$ID}
                                                    </td>
                                                    <td>
                                                        <a href="{$URL}">{$TITLE}</a>
                                                    </td>
                                                    <td>
                                                        <a href="{url path="/admin/export"}/position/up/{$ID}">
                                                            <span class="glyphicon glyphicon-arrow-up"></span>
                                                        </a>
                                                        {$POSITION}
                                                        <a href="{url path="/admin/export/position/down"}/{$ID}">
                                                            <span class="glyphicon glyphicon-arrow-down"></span>
                                                        </a>
                                                    </td>
                                                </tr>
                                            {/loop}
                                        </tbody>
                                    </table>
                                </div>
                            </div>
                        </div>

                    {if $LOOP_COUNT % 3}
                    </div>
                    {/if}
                {/loop}

                {module_include location='configuration_bottom'}
            </div>
        </div>
    </form>
    {/form}

{/block}


{block name="javascript-initialization"}
    {javascripts file='assets/js/bootstrap-switch/bootstrap-switch.js'}
        <script src="{$asset_url}"></script>
    {/javascripts}
{/block}

{block name="javascript-last-call"}
    <!-- -->
    <script>
        $(document).ready(function() {
            var compression_switch = $(".export-compression-switch");
            var compression_row = $(".export-compression-selection-row");

            compression_switch.on("switch-change", function(e, data) {
                    var is_checked = data.value;

                    if (is_checked) {
                        compression_row.show();
                    } else {
                        compression_row.hide();
                    }
                });

            if ($("input[type=checkbox]", compression_switch).is(":checked")) {
                compression_row.show();
            } else {
                compression_row.hide();
            }
        });
    </script>
    {module_include location='configuration-js'}
{/block}